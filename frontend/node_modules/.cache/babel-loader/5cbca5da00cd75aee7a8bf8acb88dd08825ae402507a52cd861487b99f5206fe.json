{"ast":null,"code":"var _jsxFileName = \"/Users/akifumitanabe/Desktop/react /frontend/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useRef, useCallback, useEffect } from 'react'; // Added useEffect\nimport { Editor } from '@monaco-editor/react';\nimport io from 'socket.io-client';\nimport { useDrag, useDrop, DndProvider, HTML5Backend } from 'react-dnd';\nimport { Resizable } from 'react-resizable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DraggableEditor = ({\n  onDrop\n}) => {\n  _s();\n  const ref = useRef(null);\n  const [, drop] = useDrop({\n    accept: 'EDITOR',\n    drop: item => onDrop(item)\n  });\n  const [, drag] = useDrag({\n    type: 'EDITOR',\n    item: {},\n    collect: monitor => ({\n      isDragging: !!monitor.isDragging()\n    })\n  });\n  drag(drop(ref));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: ref,\n    children: /*#__PURE__*/_jsxDEV(Editor, {\n      height: \"500px\",\n      theme: \"vs-dark\",\n      language: \"javascript\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 5\n  }, this);\n};\n_s(DraggableEditor, \"ChJgTn7bHeiPAYSfbK4Kbp5lMnM=\", false, function () {\n  return [useDrop, useDrag];\n});\n_c = DraggableEditor;\nfunction App() {\n  _s2();\n  const [consoleContent, setConsoleContent] = useState('');\n  const socket = useRef(null);\n  const [isExecuting, setIsExecuting] = useState(false);\n  const editorRef = useRef(null); // Re-introduced editorRef\n\n  useEffect(() => {\n    return () => {\n      if (socket.current) {\n        socket.current.disconnect();\n      }\n    };\n  }, []);\n  const handleExecute = useCallback(async () => {\n    setIsExecuting(true);\n    const content = editorRef.current.getValue();\n    try {\n      const response = await fetch(\"http://localhost:3001/compile\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code: content\n        })\n      });\n      const data = await response.json();\n      if (data && data.containerPath) {\n        socket.current = io(`http://localhost:${data.containerPath}`);\n        socket.current.on('s2c_message', msg => {\n          setConsoleContent(msg.value);\n          if (socket.current) {\n            socket.current.disconnect();\n            socket.current = null;\n          }\n        });\n        socket.current.emit('c2s_message', {\n          value: content\n        });\n      } else {\n        console.error(\"Could not retrieve the container path\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n    setTimeout(() => setIsExecuting(false), 500);\n  }, []);\n  const handleDrop = item => {\n    // ドラッグ&ドロップの処理をここに書く\n  };\n  return /*#__PURE__*/_jsxDEV(DndProvider, {\n    backend: HTML5Backend,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '70%',\n        margin: 'auto'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleExecute,\n        disabled: isExecuting,\n        children: \"Execute\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Resizable, {\n        children: /*#__PURE__*/_jsxDEV(DraggableEditor, {\n          onDrop: handleDrop\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: '20px',\n          border: '1px solid #444',\n          height: '200px',\n          overflow: 'auto',\n          backgroundColor: '#111',\n          color: '#eee',\n          padding: '10px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"pre\", {\n          children: consoleContent\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"79fJdcQE2thl299hhkGXl1xPu6Y=\");\n_c2 = App;\nexport default App;\nvar _c, _c2;\n$RefreshReg$(_c, \"DraggableEditor\");\n$RefreshReg$(_c2, \"App\");","map":{"version":3,"names":["React","useState","useRef","useCallback","useEffect","Editor","io","useDrag","useDrop","DndProvider","HTML5Backend","Resizable","jsxDEV","_jsxDEV","DraggableEditor","onDrop","_s","ref","drop","accept","item","drag","type","collect","monitor","isDragging","children","height","theme","language","fileName","_jsxFileName","lineNumber","columnNumber","_c","App","_s2","consoleContent","setConsoleContent","socket","isExecuting","setIsExecuting","editorRef","current","disconnect","handleExecute","content","getValue","response","fetch","method","headers","body","JSON","stringify","code","data","json","containerPath","on","msg","value","emit","console","error","setTimeout","handleDrop","backend","style","width","margin","onClick","disabled","marginTop","border","overflow","backgroundColor","color","padding","_c2","$RefreshReg$"],"sources":["/Users/akifumitanabe/Desktop/react /frontend/src/App.js"],"sourcesContent":["import React, { useState, useRef, useCallback, useEffect } from 'react'; // Added useEffect\nimport { Editor } from '@monaco-editor/react';\nimport io from 'socket.io-client';\nimport { useDrag, useDrop, DndProvider, HTML5Backend } from 'react-dnd';\n\nimport { Resizable } from 'react-resizable';\n\nconst DraggableEditor = ({ onDrop }) => {\n  const ref = useRef(null);\n  const [, drop] = useDrop({\n    accept: 'EDITOR',\n    drop: (item) => onDrop(item),\n  });\n  const [, drag] = useDrag({\n    type: 'EDITOR',\n    item: {},\n    collect: (monitor) => ({\n      isDragging: !!monitor.isDragging(),\n    }),\n  });\n\n  drag(drop(ref));\n\n  return (\n    <div ref={ref}>\n      <Editor \n        height='500px' \n        theme='vs-dark' \n        language='javascript'\n      />\n    </div>\n  );\n}\n\nfunction App() {\n  const [consoleContent, setConsoleContent] = useState('');\n  const socket = useRef(null);\n  const [isExecuting, setIsExecuting] = useState(false);\n  const editorRef = useRef(null); // Re-introduced editorRef\n\n  useEffect(() => {\n    return () => {\n      if (socket.current) {\n        socket.current.disconnect();\n      }\n    };\n  }, []);\n\n\n\n    const handleExecute = useCallback(async () => {\n    setIsExecuting(true);\n    const content = editorRef.current.getValue();\n    try {\n      const response = await fetch(\"http://localhost:3001/compile\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ code: content }),\n      });\n      const data = await response.json();\n      if (data && data.containerPath) {\n        socket.current = io(`http://localhost:${data.containerPath}`);\n        socket.current.on('s2c_message', (msg) => {\n          setConsoleContent(msg.value);\n          if (socket.current) {\n            socket.current.disconnect();\n            socket.current = null;\n          }\n        });\n        socket.current.emit('c2s_message', { value: content });\n      } else {\n        console.error(\"Could not retrieve the container path\");\n      }\n    } catch (error) {\n      console.error(\"Error:\", error);\n    }\n    setTimeout(() => setIsExecuting(false), 500);\n  }, []);\n\n  const handleDrop = (item) => {\n    // ドラッグ&ドロップの処理をここに書く\n  };\n\n  return (\n    <DndProvider backend={HTML5Backend}>\n      <div style={{ width: '70%', margin: 'auto' }}>\n        <button onClick={handleExecute} disabled={isExecuting}>Execute</button>\n\n        <Resizable>\n          <DraggableEditor onDrop={handleDrop} />\n        </Resizable>\n\n        {/* Console Output Area */}\n        <div style={{ marginTop: '20px', border: '1px solid #444', height: '200px', overflow: 'auto', backgroundColor: '#111', color: '#eee', padding: '10px' }}>\n          <pre>{consoleContent}</pre>\n        </div>\n      </div>\n    </DndProvider>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}